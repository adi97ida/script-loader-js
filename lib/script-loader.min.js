"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Loader=function(){function o(){}return o.canSupportRel=function(e){var n=document.createElement("link");return!!(n.relList&&n.relList.supports&&n.relList.supports(e))},o.loadStylesheet=function(e,n){var i=this;return this._stylesheets[e]||(this._stylesheets[e]=new Promise(function(r,u){var t=document.createElement("link"),a=n||{},c=a.prepend,s=c===void 0?!1:c,h=a.attributes,l=h===void 0?{}:h;Object.keys(l).forEach(function(d){t.setAttribute(d,l[d])}),t.onload=function(){return r()},t.onerror=function(d){delete i._stylesheets[e],u(d)},t.rel="stylesheet",t.href=e,s&&document.head.children[0]?document.head.insertBefore(t,document.head.children[0]):document.head.appendChild(t)})),this._stylesheets[e]},o.loadStylesheets=function(e,n){var i=this;return Promise.all(e.map(function(r){return i.loadStylesheet(r,n)})).then(function(){})},o.preloadStylesheet=function(e,n){var i=this;return this._preloadedStylesheets[e]||(this._preloadedStylesheets[e]=new Promise(function(r,u){var t=(n||{}).prefetch,a=t===void 0?!1:t,c=a?"prefetch":"preload";if(i.canSupportRel(c)){var s=document.createElement("link");s.as="style",s.rel=a?"prefetch":"preload",s.href=e,s.onload=function(){r()},s.onerror=function(h){delete i._preloadedStylesheets[e],u(h)},document.head.appendChild(s)}else fetch(e,{credentials:"omit",headers:{Accept:"text/css"}}).then(function(){return r()}).catch(u)})),this._preloadedStylesheets[e]},o.preloadStylesheets=function(e,n){var i=this;return Promise.all(e.map(function(r){return i.preloadStylesheet(r,n)})).then(function(){})},o.loadScript=function(e,n){var i=this;return this._scripts[e]||(this._scripts[e]=new Promise(function(r,u){var t=document.createElement("script"),a=n||{},c=a.async,s=c===void 0?!1:c,h=a.attributes,l=h===void 0?{}:h;Object.keys(l).forEach(function(d){t.setAttribute(d,l[d])}),t.onload=function(){return r()},t.onreadystatechange=function(){return r()},t.onerror=function(d){delete i._scripts[e],u(d)},t.async=s,t.src=e,document.body.appendChild(t)})),this._scripts[e]},o.loadScripts=function(e,n){var i=this;return Promise.all(e.map(function(r){return i.loadScript(r,n)})).then(function(){})},o.preloadScript=function(e,n){var i=this;return this._preloadedScripts[e]||(this._preloadedScripts[e]=new Promise(function(r,u){var t=(n||{}).prefetch,a=t===void 0?!1:t,c=a?"prefetch":"preload";if(i.canSupportRel(c)){var s=document.createElement("link");s.as="script",s.rel=c,s.href=e,s.onload=function(){r()},s.onerror=function(){delete i._preloadedScripts[e],u()},document.head.appendChild(s)}else fetch(e,{credentials:"omit",headers:{Accept:"application/javascript"}}).then(function(){return r()}).catch(u)})),this._preloadedScripts[e]},o.preloadScripts=function(e,n){var i=this;return Promise.all(e.map(function(r){return i.preloadScript(r,n)})).then(function(){})},o._stylesheets={},o._preloadedStylesheets={},o._scripts={},o._preloadedScripts={},o}();window.fvStudioScriptLoader=Loader;
